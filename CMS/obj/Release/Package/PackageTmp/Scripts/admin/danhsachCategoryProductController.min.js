myApp.controller("danhsachCategoryProductController",["$scope","$http","$window","CategoryProduct","MenuMultiLevel","uiGridConstants",function(n,t,i,r){n.category={};n.categories=[];n.gridOptions={};t.get("/API/CategoryProductsAPI/").success(function(t){n.gridOptions.data=r.getTable(t)});n.gridOptions.columnDefs=[{displayName:"STT",name:"stt",enableCellEdit:!1,enableSorting:!1,enableFiltering:!1,width:55,cellTemplate:'<div class="ui-grid-cell-contents text-center">{{grid.renderContainers.body.visibleRowCache.indexOf(row)+1}}<\/div>'},{displayName:"ID",name:"idCategory",enableSorting:!1,width:60},{displayName:"Tiêu đề",name:"title",enableSorting:!1},{displayName:"Alias",name:"alias",enableSorting:!1},{displayName:"Xuất bản",name:"published"},{displayName:"Ghi chú",name:"note",enableSorting:!1},{displayName:"",name:"delete",enableSorting:!1,enableFiltering:!1,width:100,enableCellEdit:!1,cellTemplate:'<div ><button style="margin-left: 10px; margin-top: 3px;" class="btn btn-xs btn-info" ng-click="grid.appScope.EditCategory(row.entity.idCategory)"><span class="fa fa-edit"><\/span><\/button><button style="margin-left: 10px; margin-top: 3px;" class="btn btn-xs btn-danger" ng-click="grid.appScope.DeleteCategory(row.entity.idCategory)"><span class="fa fa-bitbucket"><\/span><\/button><\/div>'}];n.gridOptions.enableFiltering=!0;n.gridOptions.enableRowSelection=!0;n.gridOptions.enableRowHeaderSelection=!1;n.gridOptions.multiSelect=!1;n.gridOptions.onRegisterApi=function(){};n.EditCategory=function(n){i.location.href="/Admin/CategoryProducts/Create?idCategory="+n};n.DeleteCategory=function(i){var i=i;confirm("Bạn có chắc chắn muốn xóa?")&&(t.get("/API/CategoryProductsAPI/").success(function(n){var u=r.getallCategory(n);angular.forEach(u,function(n,r){if(u[r].idCategoryParent==i){var f=u[r];f.idCategoryParent=null;t.put("/API/CategoryProductsAPI/"+f.idCategory,f)}})}),t.delete("/API/CategoryProductsAPI/"+i).success(function(){t.get("/API/CategoryProductsAPI").success(function(t){n.gridOptions.data=r.getTable(t)});toastr.success("Thành công","Xóa")}))}}]);