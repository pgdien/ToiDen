myApp.controller("themProductController",["$scope","$http","$window","$location","$filter","Alias","MenuMultiLevel","Url",function(n,t,i,r,u,f,e,o){n.product={};n.categories=[];n.category={};n.chooseImage=function(){var t=new CKFinder;t.selectActionFunction=function(t){n.product.image=t;n.$apply()};t.SelectFunction="ShowFileInfo";t.popup()};n.currentIdProduct=o.getParameterByName("idProduct");n.currentIdProduct?t.get("/API/ProductsAPI/"+n.currentIdProduct).success(function(t){n.product={idProduct:t.idProduct,idCategoryProduct:t.idCategoryProduct,idUserCreated:t.idUserCreated,idUserModified:t.idUserModified,timeCreated:t.timeCreated,timeModified:t.timeModified,title:t.title,alias:t.alias,content:t.content,note:t.note,description:t.description,price:t.price,noiSX:t.noiSX,trongLuong:t.trongLuong,vatLieuDongGoi:t.vatLieuDongGoi,tinhTrang:t.tinhTrang,published:t.published,image:t.image,tags:t.tags,version:t.version,deleted:t.deleted,feature:t.feature,metadescription:t.metadescription,metakewords:t.metakewords,author:t.author,robots:t.robots};n.category={id:t.idCategoryProduct}}):(n.product={published:1,feature:"0",robots:"Index, Follow",idUserCreated:angular.element("#user").val(),timeCreated:new Date,idUserModified:angular.element("#user").val(),timeModified:new Date},n.category={id:1});t.get("/API/CategoryProductsAPI/").success(function(t){n.categories=e.getDropdownMenuCategoryProduct(t)});n.saveProduct=function(){n.product.idCategoryProduct=n.category.id;n.currentIdProduct?(n.product.idUserModified=angular.element("#user").val(),n.product.timeModified=new Date,t.put("/API/ProductsAPI/"+n.product.idProduct,n.product).success(function(){toastr.success("Thành công","Lưu Sản phẩm")}).error(function(){toastr.error("Thất bại","Thêm Sản phẩm")})):t.post("/API/ProductsAPI/",n.product).success(function(){toastr.success("Thành công","Thêm Sản phẩm");i.location.href="/Admin/Products"}).error(function(){toastr.error("Thất bại","Thêm Sản phẩm")})};n.saveProductAndExit=function(){n.product.idCategoryProduct=n.category.id;n.currentIdProduct?(n.product.idUserModified=angular.element("#user").val(),n.product.timeModified=new Date,t.put("/API/ProductsAPI/"+n.product.idProduct,n.product).success(function(){i.location.href="/Admin/Products"}).error(function(){toastr.error("Thất bại","Lưu Sản phẩm")})):t.post("/API/ProductsAPI/",n.product).success(function(){i.location.href="/Admin/Products"}).error(function(){toastr.error("Thất bại","Thêm Sản phẩm")})};n.saveProductAndNew=function(){n.product.idCategoryProduct=n.category.id;n.currentIdProduct?(n.product.idUserModified=angular.element("#user").val(),n.product.timeModified=new Date,t.put("/API/ProductsAPI/"+n.product.idProduct,n.product).success(function(){i.location.href="/Admin/Products/Create"}).error(function(){toastr.error("Thất bại","Lưu Danh mục")})):t.post("/API/ProductsAPI/",n.product).success(function(){i.location.href="/Admin/Products/Create"}).error(function(){toastr.error("Thất bại","Thêm Sản phẩm")})};n.cancel=function(){i.location.href="/Admin/Products"};n.changeTitle=function(){n.product.alias=f.genAlias(n.product.title)}}]);